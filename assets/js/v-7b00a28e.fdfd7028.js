(self.webpackChunkblog_site=self.webpackChunkblog_site||[]).push([[1251],{6815:(s,n,a)=>{"use strict";a.r(n),a.d(n,{data:()=>o});const o={key:"v-7b00a28e",path:"/webpack4/configuration/mode.html",title:"mode",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"WarnNoModeSetPlugin",slug:"warnnomodesetplugin",children:[]}],filePathRelative:"webpack4/configuration/mode.md",git:{updatedTime:162722505e4,contributors:[{name:"jizhi",email:"jizhi@didiglobal.com",commits:1}]}}},6121:(s,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>E});var o=a(6252);const l=(0,o.uE)('<h1 id="mode" tabindex="-1"><a class="header-anchor" href="#mode" aria-hidden="true">#</a> mode</h1><p>mode 决定 webpack 需要使用哪些内置的 plugins。它的枚举值如下：</p><table><thead><tr><th style="text-align:left;">枚举值</th><th style="text-align:right;">作用</th></tr></thead><tbody><tr><td style="text-align:left;"><code>&#39;production&#39;</code></td><td style="text-align:right;">设置 <code>process.env.NODE_ENV</code> 为 <code>production</code>，同时开启 <code>options.optimization</code> 的若干选项</td></tr><tr><td style="text-align:left;"><code>&#39;development&#39;</code></td><td style="text-align:right;">设置 <code>process.env.NODE_ENV</code> 为 <code>development</code></td></tr><tr><td style="text-align:left;"><code>&#39;none&#39;</code></td><td style="text-align:right;">一般不设置</td></tr></tbody></table><p>如果没有设置 <code>mode</code> 值，效果与 <code>&#39;production&#39;</code> 一致，并且利用 WarnNoModeSetPlugin 给出一个 warning。</p><h2 id="warnnomodesetplugin" tabindex="-1"><a class="header-anchor" href="#warnnomodesetplugin" aria-hidden="true">#</a> WarnNoModeSetPlugin</h2><div class="language-javascript ext-js"><pre class="shiki" style="background-color:#24292e;"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NoModeWarning</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WebpackError</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">modules</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">super</span><span style="color:#E1E4E8;">();</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;NoModeWarning&quot;</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.message </span><span style="color:#F97583;">=</span></span>\n<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;configuration</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>\n<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;The &#39;mode&#39; option has not been set, webpack will fallback to &#39;production&#39; for this value. &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>\n<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;Set &#39;mode&#39; option to &#39;development&#39; or &#39;production&#39; to enable defaults for each environment.</span><span style="color:#79B8FF;">\\n</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>\n<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;You can also set it to &#39;none&#39; to disable any default behavior. &quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span></span>\n<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;Learn more: https://webpack.js.org/configuration/mode/&quot;</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">Error</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">captureStackTrace</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">constructor</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">  }</span></span>\n<span class="line"><span style="color:#E1E4E8;">};</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WarnNoModeSetPlugin</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">apply</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">compiler</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">    compiler.hooks.thisCompilation.</span><span style="color:#B392F0;">tap</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;WarnNoModeSetPlugin&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">compilation</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">      compilation.warnings.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NoModeWarning</span><span style="color:#E1E4E8;">());</span></span>\n<span class="line"><span style="color:#E1E4E8;">    });</span></span>\n<span class="line"><span style="color:#E1E4E8;">  }</span></span>\n<span class="line"><span style="color:#E1E4E8;">}</span></span>\n<span class="line"></span></code></pre></div>',6),e=(0,o.Uk)("WarnNoModeSetPlugin 插件的实例化是在"),p=(0,o.Uk)("执行 innerPlugins "),t=(0,o.Uk)(" 的时候，而 thisCompilation hook 的触发时机是在调用 "),c=(0,o.Wm)("code",null,"compiler.compile",-1),r=(0,o.Uk)(" 的时候，这个时候刚生成 compilation，会往 compilation 存入一个 warning，在构建完成之后会将这条 warning 显示出来。"),E={render:function(s,n){const a=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.j4)(o.HY,null,[l,(0,o.Wm)("p",null,[e,(0,o.Wm)(a,{to:"/webpack4/webpack-process/inner-plugins.html#%E7%AC%AC%E5%85%AB%E6%AD%A5-options-mode"},{default:(0,o.w5)((()=>[p])),_:1}),t,c,r])],64)}}}}]);